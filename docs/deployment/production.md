# Инструкция по production-развертыванию

Перед локальным развертыванием обязательно нужно иметь рабочую локальную версию, так как env-файл для прода
необходимо залить сразу готовый. Возможно это неправильно (например, ключ приложения, который генерируется
через php artisan key:generate - для прода не будет генерироваться отдельно), но как сделать правильно - 
пока не додумал. Нужно больше углубиться в CI CD процессы, чтобы понять эти нюансы.

1. Клонируем репозиторий с [инфраструктурой](https://github.com/whatislooooove/yofun-infrastructure)
2. Настраиваем env файл, а именно: соединяем в 1 файл переменные backend-части приложения и frontend-части
   (согласно env.example)
3. Готово, можно вручную подтянуть образы и запустить:
```bash
  # Ручной заруск контейнеров
  docker compose -f docker-compose.prod.yml pull
  docker compose -f docker-compose.prod.yml up -d
```

CI/CD на Github Actions настроены на автоматическую сборку и деплой контейнеров при каждом пуше нового коммита
в мастер, поэтому для обновления прода все что необходимо сделать - сделать пуш в мастер.